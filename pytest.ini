[pytest]
minversion = 8.0
testpaths = tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*
asyncio_mode = auto

# Test markers for 3-tier strategy
markers =
    smoke: Fast sanity checks (<3s total) - run on every commit
    integration: Tests with Playwright/Redis dependencies (~15s)
    e2e: Full system tests with Docker (~60s)
    slow: Known slow tests (>5s individual)
    requires_redis: Tests requiring Redis instance
    requires_playwright: Tests requiring Playwright browser
    unit: Pure unit tests with no external dependencies

# Timeout defaults (prevent hanging tests)
timeout = 30
timeout_method = thread

# Output configuration
addopts =
    -v
    --strict-markers
    --tb=short
    --show-capture=no
    -ra

# Warnings
filterwarnings =
    ignore::DeprecationWarning:pythonjsonlogger.*

# Logging
log_cli = false
log_cli_level = INFO
